<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login - YSWS Admin</title>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Fira Code', monospace;
      background-color: #000;
      background-image: 
        linear-gradient(transparent 1px, rgba(255,255,255,0.05) 1px),
        linear-gradient(90deg, transparent 1px, rgba(255,255,255,0.05) 1px);
      background-size: 20px 20px;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .login-container {
      background: rgba(0, 0, 0, 0.85);
      padding: 40px;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(255,255,255,0.1);
      text-align: center;
      max-width: 400px;
      width: 100%;
      border: 1px solid #333;
      z-index: 1;
      position: relative;
    }

    .login-header h1 {
      color: #fff;
      margin-bottom: 10px;
    }

    .login-header p {
      color: #aaa;
      margin-bottom: 30px;
    }

    .form-group {
      margin-bottom: 20px;
      text-align: left;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      color: #ccc;
      font-weight: 500;
    }

    .form-group input {
      width: 100%;
      padding: 12px;
      border: 2px solid red;
      border-radius: 5px;
      font-size: 16px;
      font-family: 'Fira Code', monospace;
      background: #111;
      color: #fff;
      box-sizing: border-box;
    }

    .form-group input::placeholder {
      color: #888;
    }

    .form-group input:focus {
      outline: none;
      border-color: #ff4d4d;
    }

    .submit-btn {
      width: 100%;
      padding: 12px;
      background: red;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.3s;
    }

    .submit-btn:hover {
      background: #cc0000;
    }

    .flash-messages {
      margin-bottom: 20px;
    }

    .flash {
      padding: 10px;
      border-radius: 5px;
      margin-bottom: 10px;
      font-size: 14px;
    }

    .flash.error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .flash.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .image-row {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 20px 0;
    }

    .lucy-img {
      max-width: 100px;
      height: auto;
      border-radius: 6px;
      border: 1px solid #444;
    }

    .version {
      font-size: 0.8rem;
      color: gray;
      font-weight: normal;
    }

   
    .modal-backdrop {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.85);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 999;
      display: none; 
    }

    .modal-content-custom {
      background: #111;
      padding: 30px;
      border-radius: 10px;
      max-width: 500px;
      color: #fff;
      text-align: center;
      border: 1px solid #333;
    }

    .credentials {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 15px;
    }

    .credential-box {
      background: #222;
      border: 1px solid #444;
      padding: 10px 15px;
      border-radius: 6px;
      font-family: 'Fira Code', monospace;
      color: #ff4d4d;
      font-weight: bold;
    }

    .modal-close {
      margin-top: 20px;
      padding: 10px 20px;
      background: red;
      border: none;
      border-radius: 5px;
      color: white;
      cursor: pointer;
    }

    .modal-close:hover {
      background: #cc0000;
    }
 #pageContent.blurred {
  filter: blur(5px);
  pointer-events: none;
}

.modal-backdrop#infoModal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.85);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 999;
}

.modal-content-custom {
  position: relative;
  background: #111;
  padding: 30px;
  border-radius: 10px;
  max-width: 500px;
  color: #fff;
  text-align: center;
  border: 1px solid #333;
  z-index: 1000;
}

.modal-close-x {
  position: absolute;
  top: 15px;
  right: 20px;
  font-size: 20px;
  color: red;
  cursor: pointer;
}

.info-link {
  color: gray;
  text-decoration: underline;
  font-size: 0.9rem;
  cursor: pointer;
  margin-bottom: 10px;
}


  </style>
</head>
<body>
<div id="pageContent"></div>
  <div class="login-container">
    <div class="login-header">
      <h1>Lucy <span class="version">v1</span></h1>
      <div class="image-row">
        <img src="static/imgs/lucy1.jpg" alt="Lucy 1" class="lucy-img">
        <img src="static/imgs/lucy2.jpg" alt="Lucy 2" class="lucy-img">
      </div>
      <p>If you don't know what this is, better get out of here quickly.</p>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flash-messages">
          {% for category, message in messages %}
            <div class="flash {{ category }}">{{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <form method="POST">
      <div class="form-group">
        <div class="info-link" onclick="openInfoModal()">What is this?</div>
        <label for="admin_key">Admin Key:</label>
        <input type="text" id="admin_key" name="admin_key" required placeholder="dm @jim or ask your PoC to get this">
      </div>
      <button type="submit" class="submit-btn">Login</button>
    </form>
  </div>

  <div class="modal-backdrop" id="communityModal">
    <div class="modal-content-custom">
      <h2>Hey there!</h2>
      <p>This is Lucy, a tool to help people who organize YSWS and the community. It includes Hackatime API wrappers, a chatbot trained on many YSWS, airtable automations and more!</p>
      <p>Since you are not an admin and probably see this in voting, use the following credentials:</p>
      <div class="credentials">
        <div class="credential-box">Admin key: <b>community</b></div>
      </div>
      <button class="modal-close" onclick="closeModal()">Got it</button>
    </div>
  </div>
</div>
  <div class="modal-backdrop" id="infoModal">
  <div class="modal-content-custom">
    <div class="modal-close-x" onclick="closeInfoModal()">&#10006;</div>
    <h2>What is this?</h2>
    <p>Lucy (ysws.org) is a tool collection for YSWS organizers & reviewers. It includes airtable and HCB automations, hackatime api wrappers, a chatbot finetuned on a 1.5k line prompt that can answer anything about YSWS, HCB and more! (lucy even has FBI audit logs to monitor everything). Around 31 people use this as of 16 Sep 2025 (um also yeah this is named after jim's cat which he couldn't keep)</p>
  </div>
</div>


  <script>
    function closeModal() {
      document.getElementById('communityModal').style.display = 'none';
    }

    {% if show_community_modal %}
      document.getElementById('communityModal').style.display = 'flex';
    {% endif %}

function openInfoModal() {
  document.getElementById('infoModal').style.display = 'flex';
  document.getElementById('pageContent').classList.add('blurred');
}

function closeInfoModal() {
  document.getElementById('infoModal').style.display = 'none';
  document.getElementById('pageContent').classList.remove('blurred');
}
  </script>
</body>
</html>
